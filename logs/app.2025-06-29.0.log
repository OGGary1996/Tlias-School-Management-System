2025-06-29 13:00:50 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 47777 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 13:00:50 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 13:00:50 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 13:00:50 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 13:00:50 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 13:00:50 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 13:00:50 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 13:00:50 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 454 ms
2025-06-29 13:00:51 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 13:00:51 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 13:00:51 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 13:00:51 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 1.088 seconds (process running for 1.35)
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /login is in whitelist, allowing access.
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /login is in whitelist, allowing access.
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.kezhang.tliasbackend.controller.LoginController - Login request received for user: KeZhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login request received, processing login for employee: KeZhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24367fb1
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login successful for employee: KeZhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Returning login response for employee: KeZhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.kezhang.tliasbackend.controller.LoginController - Login successful for user: KeZhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generating JWT token for employee: ID=58, Username=KeZhang, Name=Ke Zhang
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMjM2NTMsImV4cCI6MTc1MTgyODQ1M30.Mk5QqGSlddX-c0RtsYVLKC4ycXMPKflf0RCTUWSQoWQ
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.kezhang.tliasbackend.controller.LoginController - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMjM2NTMsImV4cCI6MTc1MTgyODQ1M30.Mk5QqGSlddX-c0RtsYVLKC4ycXMPKflf0RCTUWSQoWQ
2025-06-29 13:00:53 [http-nio-8080-exec-1] INFO  c.kezhang.tliasbackend.controller.LoginController - Token set in login response for user: EmployeeLoginResponseDTO(id=58, name=Ke Zhang, username=KeZhang, token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMjM2NTMsImV4cCI6MTc1MTgyODQ1M30.Mk5QqGSlddX-c0RtsYVLKC4ycXMPKflf0RCTUWSQoWQ)
2025-06-29 13:01:12 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees is not in whitelist, checking login status.
2025-06-29 13:01:12 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.lang.NullPointerException: Cannot invoke "String.substring(int)" because the return value of "jakarta.servlet.http.HttpServletRequest.getHeader(String)" is null
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:60)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 13:01:58 [http-nio-8080-exec-5] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 13:01:58 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.lang.NullPointerException: Cannot invoke "String.substring(int)" because the return value of "jakarta.servlet.http.HttpServletRequest.getHeader(String)" is null
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:60)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 13:05:38 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 13:05:40 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 13:05:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-29 13:05:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-29 13:05:41 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 47829 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 13:05:41 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 13:05:42 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 13:05:42 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 13:05:42 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 13:05:42 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 13:05:42 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 13:05:42 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 400 ms
2025-06-29 13:05:42 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 13:05:42 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 13:05:42 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 13:05:42 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 0.972 seconds (process running for 1.294)
2025-06-29 13:05:45 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 13:05:45 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 13:05:45 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-29 13:05:45 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 13:05:45 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: null
2025-06-29 13:05:45 [http-nio-8080-exec-1] WARN  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is missing or empty, throwing LoginRequiredException.
2025-06-29 13:05:45 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
com.kezhang.tliasbackend.exception.LoginRequiredException: Login is required to access this resource.
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:67)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 13:43:47 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 13:43:49 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 13:43:51 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 48028 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 13:43:51 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 13:43:51 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 13:43:51 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 13:43:51 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 13:43:51 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 13:43:52 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 13:43:52 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 448 ms
2025-06-29 13:43:52 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 13:43:52 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 13:43:52 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 13:43:52 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 1.059 seconds (process running for 1.363)
2025-06-29 13:43:56 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 13:43:56 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 13:43:56 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-29 13:43:56 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 13:43:56 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: null
2025-06-29 13:43:56 [http-nio-8080-exec-1] WARN  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is missing or empty, throwing LoginRequiredException.
2025-06-29 13:43:56 [http-nio-8080-exec-1] ERROR c.k.tliasbackend.controller.GlobalExceptionHandler - A login required error occurred: Login is required to access this resource.
com.kezhang.tliasbackend.exception.LoginRequiredException: Login is required to access this resource.
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 13:45:24 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 13:45:26 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 16:18:23 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 48893 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 16:18:23 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 16:18:23 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 16:18:23 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 16:18:23 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 16:18:23 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 16:18:23 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 16:18:23 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 398 ms
2025-06-29 16:18:24 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 16:18:24 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 16:18:24 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 16:18:24 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 0.949 seconds (process running for 1.185)
2025-06-29 16:18:28 [http-nio-8080-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 16:18:28 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 16:18:28 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-29 16:18:28 [http-nio-8080-exec-2] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 16:18:28 [http-nio-8080-exec-2] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: null
2025-06-29 16:18:28 [http-nio-8080-exec-2] WARN  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is missing or empty, throwing LoginRequiredException.
2025-06-29 16:18:28 [http-nio-8080-exec-2] ERROR c.k.tliasbackend.controller.GlobalExceptionHandler - A login required error occurred: Login is required to access this resource.
com.kezhang.tliasbackend.exception.LoginRequiredException: Login is required to access this resource.
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:69)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 16:18:34 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 16:18:36 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 16:39:01 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 49015 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 16:39:01 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 16:39:02 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 16:39:02 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 16:39:02 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 16:39:02 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 16:39:02 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 16:39:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 461 ms
2025-06-29 16:39:02 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 16:39:02 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 16:39:02 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 16:39:02 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 1.084 seconds (process running for 1.571)
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /login is in whitelist, allowing access.
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.kezhang.tliasbackend.controller.LoginController - Login request received for user: KeZhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login request received, processing login for employee: KeZhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4b54cba9
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login successful for employee: KeZhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Returning login response for employee: KeZhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.kezhang.tliasbackend.controller.LoginController - Login successful for user: KeZhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generating JWT token for employee: ID=58, Username=KeZhang, Name=Ke Zhang
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.kezhang.tliasbackend.controller.LoginController - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 16:39:19 [http-nio-8080-exec-2] INFO  c.kezhang.tliasbackend.controller.LoginController - Token set in login response for user: EmployeeLoginResponseDTO(id=58, name=Ke Zhang, username=KeZhang, token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ)
2025-06-29 16:40:08 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 16:40:08 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: null
2025-06-29 16:40:08 [http-nio-8080-exec-3] WARN  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is missing or empty, throwing LoginRequiredException.
2025-06-29 16:40:08 [http-nio-8080-exec-3] ERROR c.k.tliasbackend.controller.GlobalExceptionHandler - A login required error occurred: Login is required to access this resource.
com.kezhang.tliasbackend.exception.LoginRequiredException: Login is required to access this resource.
	at com.kezhang.tliasbackend.proxy.filter.LoginFilter.doFilter(LoginFilter.java:69)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is present, validating token.
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Parsed JWT token claims: {sub=KeZhang, id=58, name=Ke Zhang, iat=1751236759, exp=1751841559}
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Token is valid, allowing access to the requested resource.
2025-06-29 16:40:21 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.interceptor.LoginInterceptor - LoginInterceptor: preHandle method called.
2025-06-29 16:40:45 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.interceptor.LoginInterceptor - Authorization header found, token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 16:40:51 [http-nio-8080-exec-4] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Parsed JWT token claims: {sub=KeZhang, id=58, name=Ke Zhang, iat=1751236759, exp=1751841559}
2025-06-29 16:40:59 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.interceptor.LoginInterceptor - Token validation successful, allowing access.
2025-06-29 16:41:02 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.controller.EmployeeController - Fetching employee by ID: 20
2025-06-29 16:41:02 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.service.impl.EmployeeServiceImpl - Fetching employee by ID: 20
2025-06-29 16:41:02 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.service.impl.EmployeeServiceImpl - Fetched employee by ID: 20, EmployeeDisplayDTO: EmployeeUpdateDTO(id=20, username=KarenAllen, name=Karen Allen, gender=0, phone=9783524985, jobTitle=4, departmentId=4, salary=54113.27, entryDate=2017-09-20, image=https://i.pravatar.cc/250?u=KarenAllen, employeeHistoryUpdateDTOList=[])
2025-06-29 16:41:02 [http-nio-8080-exec-4] INFO  c.k.tliasbackend.controller.EmployeeController - Fetched employee by ID completed. Employee details: EmployeeUpdateDTO(id=20, username=KarenAllen, name=Karen Allen, gender=0, phone=9783524985, jobTitle=4, departmentId=4, salary=54113.27, entryDate=2017-09-20, image=https://i.pravatar.cc/250?u=KarenAllen, employeeHistoryUpdateDTOList=[])
2025-06-29 16:41:12 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 16:41:14 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 16:41:14 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-29 16:41:14 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-29 18:54:44 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Starting TliasBackendApplication using Java 21.0.7 with PID 49795 (/Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem/tlias-backend/target/classes started by zhangke in /Users/zhangke/Documents/Projects/Tlias_SchoolManagementSystem)
2025-06-29 18:54:44 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-29 18:54:44 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-29 18:54:44 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-06-29 18:54:44 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-29 18:54:44 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-29 18:54:44 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-29 18:54:44 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 390 ms
2025-06-29 18:54:45 [main] INFO  o.s.v.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-06-29 18:54:45 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-06-29 18:54:45 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-06-29 18:54:45 [main] INFO  com.kezhang.tliasbackend.TliasBackendApplication - Started TliasBackendApplication in 0.946 seconds (process running for 1.182)
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /employees/20 is not in whitelist, checking login status.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Authorization header is present, validating token.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Parsed JWT token claims: {sub=KeZhang, id=58, name=Ke Zhang, iat=1751236759, exp=1751841559}
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Token is valid, allowing access to the requested resource.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.t.proxy.interceptor.LoginInterceptor - LoginInterceptor: preHandle method called.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.t.proxy.interceptor.LoginInterceptor - Authorization header found, token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyMzY3NTksImV4cCI6MTc1MTg0MTU1OX0.heXqCxmrGyWGb65MooRIX3s22heq7uZ14bOWlJIFNpQ
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Parsed JWT token claims: {sub=KeZhang, id=58, name=Ke Zhang, iat=1751236759, exp=1751841559}
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.t.proxy.interceptor.LoginInterceptor - Token validation successful, allowing access.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.controller.EmployeeController - Fetching employee by ID: 20
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.service.impl.EmployeeServiceImpl - Fetching employee by ID: 20
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45b97d5c
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.service.impl.EmployeeServiceImpl - Fetched employee by ID: 20, EmployeeDisplayDTO: EmployeeUpdateDTO(id=20, username=KarenAllen, name=Karen Allen, gender=0, phone=9783524985, jobTitle=4, departmentId=4, salary=54113.27, entryDate=2017-09-20, image=https://i.pravatar.cc/250?u=KarenAllen, employeeHistoryUpdateDTOList=[])
2025-06-29 18:54:51 [http-nio-8080-exec-1] INFO  c.k.tliasbackend.controller.EmployeeController - Fetched employee by ID completed. Employee details: EmployeeUpdateDTO(id=20, username=KarenAllen, name=Karen Allen, gender=0, phone=9783524985, jobTitle=4, departmentId=4, salary=54113.27, entryDate=2017-09-20, image=https://i.pravatar.cc/250?u=KarenAllen, employeeHistoryUpdateDTOList=[])
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.proxy.filter.LoginFilter - Request URI /login is in whitelist, allowing access.
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.kezhang.tliasbackend.controller.LoginController - Login request received for user: KeZhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login request received, processing login for employee: KeZhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Login successful for employee: KeZhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.k.tliasbackend.service.impl.LoginServiceImpl - Returning login response for employee: KeZhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.kezhang.tliasbackend.controller.LoginController - Login successful for user: KeZhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generating JWT token for employee: ID=58, Username=KeZhang, Name=Ke Zhang
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  com.kezhang.tliasbackend.utils.JWTUtil - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyNDQ4OTUsImV4cCI6MTc1MTg0OTY5NX0.91LC1cLWvBH-0ovCAait9lTl_9fwtj1a29bOwneGrUQ
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.kezhang.tliasbackend.controller.LoginController - Generated JWT token: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyNDQ4OTUsImV4cCI6MTc1MTg0OTY5NX0.91LC1cLWvBH-0ovCAait9lTl_9fwtj1a29bOwneGrUQ
2025-06-29 18:54:55 [http-nio-8080-exec-3] INFO  c.kezhang.tliasbackend.controller.LoginController - Token set in login response for user: EmployeeLoginResponseDTO(id=58, name=Ke Zhang, username=KeZhang, token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJLZVpoYW5nIiwiaWQiOjU4LCJuYW1lIjoiS2UgWmhhbmciLCJpYXQiOjE3NTEyNDQ4OTUsImV4cCI6MTc1MTg0OTY5NX0.91LC1cLWvBH-0ovCAait9lTl_9fwtj1a29bOwneGrUQ)
2025-06-29 18:55:05 [SpringApplicationShutdownHook] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-29 18:55:07 [tomcat-shutdown] INFO  o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-29 18:55:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-29 18:55:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
